{% extends 'base.html' %}
{% load static %}
{% block title %}BIT-Admin | Clientes{% endblock title %}
{% block content %}
    <div class="right_col" role="main">
        <div class="">
            <div class="page-title">
                <div class="title_left">
                    <h3>Formulario Registro Clientes</h3>
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div style="border-radius: 5px" class="x_panel">
                        <div class="x_title">
                            <h2><a href="{% url 'clientes' %}">Clientes Â»</a>
                                <small>Registro de Clientes</small>
                            </h2>
                            <ul class="nav navbar-right panel_toolbox">
                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                </li>
                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                </li>
                            </ul>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div id="Aterta" class="alert-success">

                            </div>
                            <form method="POST" id="form-registro-clientes" action=""
                                  class="form-horizontal form-label-left">
                                {% csrf_token %}
                                <input class="hidden" id="veri" type="text"name="verificar">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Tipo de Identificacion :<span
                                            class="required"></span></label>
                                    <div class="col-md-6 col-sm-9 col-xs-12">
                                        <select style="border-radius: 5px" class="form-control has-feedback-left"
                                                name="tipoIdentificacion" id="tipoIdentificacion">
                                            {% for tident in tipos_identificacion %}
                                                <option value="{{ tident.id }}">{{ tident.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                        <span class="fa fa-credit-card-alt form-control-feedback left"
                                              aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Ingrese Identificacion :<span
                                            class="required"></span></label>
                                    <div class="col-md-6 col-sm-9 col-xs-12">
                                        <input style="border-radius: 5px" type="text" id="ruc" maxlength="13"
                                               value="{{ ruc }}" class="form-control has-feedback-left" required
                                               name="ruc">
                                        <span class="fa fa-credit-card-alt form-control-feedback left"
                                              aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Ingrese Nombre :</label>
                                    <div class="col-md-6 col-sm-9 col-xs-12">
                                        <input style="border-radius: 5px" type="text" value="{{ nombre }}"
                                               class="form-control has-feedback-left" name="nombre">
                                        <span class="fa fa-user form-control-feedback left" aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Ingrese Apellido :</label>
                                    <div class="col-md-6 col-sm-9 col-xs-12">
                                        <input style="border-radius: 5px" type="text" value="{{ apellido }}"
                                               class="form-control has-feedback-left" name="apellido">
                                        <span class="fa fa-user form-control-feedback left" aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Nombre Comercial :</label>
                                    <div class="col-md-6 col-sm-9 col-xs-12">
                                        <input style="border-radius: 5px" type="text" value="{{ razonSocial }}"
                                               class="form-control has-feedback-left" name="razonSocial">
                                        <span class="fa fa-industry form-control-feedback left"
                                              aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3col-xs-12">Ingrese Pais :<span
                                            class="required"></span>
                                    </label>
                                    <div class="col-md-6 col-sm-9 col-xs-12">
                                        <select  style="border-radius: 5px" class="form-control has-feedback-left" onchange="provincia()" name="pais" id="pais">
                                            {% for pais in paises %}
                                                {% if not pais.lugar.lugar %}
                                                    <option value="{{ pais.id }}">{{ pais.nombre }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                        <span class="fa fa-map-o form-control-feedback left" aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3col-xs-12">Ingrese Provincia :<span
                                            class="required"></span>
                                    </label>
                                    <div class="col-md-6 col-sm-9 col-xs-12" name="provincias" id="provincias">
                                        <span class="fa fa-map-o form-control-feedback left" aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3col-xs-12">Ingrese Ciudad :<span
                                            class="required"></span>
                                    </label>
                                    <div class="col-md-6 col-sm-9 col-xs-12" name="lugarciudad" id="lugarciudad">
                                        <span class="fa fa-map-o form-control-feedback left" aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Ingrese Parroquia :<span
                                            class="required"></span>
                                    </label>
                                    <div class="col-md-6 col-sm-9 col-xs-12" name="lugarparroquia" id="lugarparroquia" value="{{ parroquia }}">
                                        <span class="fa fa-map-o form-control-feedback left" aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Ingrese Direccion :<span
                                            class="required"></span></label>
                                    <div class="col-md-6 col-sm-9 col-xs-12">
                                        <input style="border-radius: 5px" type="text" value="{{ direccion }}" required
                                               class="form-control has-feedback-left" name="direccion">
                                        <span class="fa fa-location-arrow form-control-feedback left"
                                              aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Ingrese Telefono :<span
                                            class="required"></span></label>
                                    <div class="col-md-6 col-sm-9 col-xs-12">
                                        <input style="border-radius: 5px" type="text" value="{{ telefono }}"
                                               class="form-control has-feedback-left" name="telefono">
                                        <span class="fa fa-phone form-control-feedback left" aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Ingrese Email :<span
                                            class="required"></span></label>
                                    <div class="col-md-6 col-sm-9 col-xs-12">
                                        <input style="border-radius: 5px" type="email" value="{{ email }}" required
                                               class="form-control has-feedback-left" name="email">
                                        <span class="fa fa-envelope form-control-feedback left"
                                              aria-hidden="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-3 col-sm-3 col-xs-12 control-label">Ingrese Estado :<span
                                            class="required"></span></label>

                                    <div class="col-md-9 col-sm-9 col-xs-12">

                                        <div class="radio">
                                            <label>
                                                <input type="radio" class="flat"
                                                        {% if estado == True %}
                                                            checked
                                                        {% endif %}
                                                       name="estado" value="1"> Activo
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" {% if estado == False %} checked {% endif %}
                                                       class="flat" name="estado" value="2"> Inactivo
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="ln_solid"></div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                                        <button class="btn bg-blue" type="submit"><i class="glyphicon glyphicon-save"></i> Guardar </button>
                                        <a class="btn bg-orange" href="{% url 'registroClientes' %}" type="reset"><i class="fa fa-remove"></i> Limpiar</a>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



{% endblock content %}

{% block scripts %}
   <script src="{% static 'js/ruc_jquery_validator.min.js' %}"></script>
    <script>
        var opciones = {
            strict: true,              // va a validar siempre, aunque la cantidad de caracteres no sea 10 ni 13
            events: "keyup",          // evento que va a disparar la validaciÃ³n
            the_classes: "invalid",    // clase que se va a agregar al nodo en el que se realiza la validaciÃ³n
            onValid: function () {
                console.log("correcto")
                if ($("#tipoIdentificacion option:selected").text()=='RUC' && $("#ruc").val().length==13){
                    $("#ruc").removeClass('parsley-error')
                    $('#veri').val('')
                }else{
                    if($("#tipoIdentificacion option:selected").text() =='CEDULA' && $("#ruc").val().length==10)
                    {
                        $("#ruc").removeClass('parsley-error')
                        $('#veri').val('')

                    }
                    else{
                        $("#ruc").addClass('parsley-error')
                        $('#veri').val('Error')

                    }
                }

            },   // callback cuando la cÃ©dula es correcta.
            onInvalid: function () {
                if($("#tipoIdentificacion option:selected").text() =='CEDULA' || $("#tipoIdentificacion option:selected").text()=='RUC')
                {
                    $("#ruc").addClass('parsley-error')
                    $('#veri').val('Error')
                }
                else{
                    $("#ruc").removeClass('parsley-error')
                     $('#veri').val('')
                }

            }  // callback cuando la cÃ©dula es incorrecta.
        };
        $('#ruc').validarCedulaEC(opciones);

        function valida(){
            $('#ruc').validarCedulaEC(opciones)
        }
        $("#tipoIdentificacion").change(valida()).change()
    </script>

    <script>
    $(document).ready(function () {
        var prov = "";
        var ciud = "";
        var parr = "";
        $('#tipoIdentificacion option[value="{{ tipo.id }}"]').attr("selected", true);
        provincia();
        function provincia() {
            $('#pais option[value="{{ parroquia.lugar.lugar.lugar.id }}"]').attr("selected", true);
            $('#pais').change(function () {
                $.get('/configuracion/lugar/' + $(this).val() + "/", function (data) {
                    prov = '<select  style="border-radius: 5px" class="form-control has-feedback-left" id="provincia">' + data + '</select>';
                    $("#provincias").html(prov);
                    $('#provincia option[value="{{ parroquia.lugar.lugar.id }}"]').attr("selected", true);
                    $('#provincia').change(function () {
                        $.get('/configuracion/lugar/' + $("#provincia").val() + "/", function (data1) {
                            ciud = '<select  style="border-radius: 5px" class="form-control has-feedback-left" name="ciudad" id="ciudad">' + data1 + '</select>';
                            $("#lugarciudad").html(ciud);
                            $('#ciudad option[value="{{ parroquia.lugar.id }}"]').attr("selected", true);
                            $('#ciudad').change(function () {
                                $.get('/configuracion/lugar/' + $(this).val() + "/", function (data2) {
                                    parr = '<select  style="border-radius: 5px" class="form-control has-feedback-left" name="parroquia" id="parroquia">' + data2 + '</select>';
                                    $("#lugarparroquia").html(parr);
                                    $('#parroquia option[value="{{ parroquia.id }}"]').attr("selected", true);
                                });
                            }).change();
                        });
                    }).change();
                });
            }).change();
        }
    })

    </script>
{% endblock %}
{% block style %}

{% endblock %}
